<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>eSense Photo Album</title>
    <link rel="stylesheet" href="css/fonts.css" />
    <link rel="stylesheet" href="css/panel-style.css" />
    <link rel="stylesheet" href="css/animate.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/bootstrap4-toggle.min.css" />
    <link
      rel="stylesheet"
      href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css"
    />
    <link rel="stylesheet" href="css/foundations.min.css" />

    <script src="js/jquery.min.js"></script>
    <script src="js/socket.io.js"></script>
    <script src="js/smoothie.js"></script>
    <script src="js/panel-main.js"></script>
    <script src="js/bootstrap4-toggle.min.js"></script>
    <script src="js/three.js"></script>
    <script type="text/javascript" src="js/amplitude.min.js"></script>
    <script src="js/control-player.js"></script>
    <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        var folder = "images/";

        // Get images from folder and add them in rows and columns
        $(document).ready(function() {
            $.ajax({
                url : folder,
                success: function (data) {
                    $(data).find("a").attr("href", function (i, val) {
                        if( val.match(/\.(jpe?g|png|gif)$/) ) {
                            $(".row").append( "<div class='column'> <img src='.." + val +"' alt='" + val +"' style='width:50%' class='images draggable zoom' onmouseout='normalImage(this)'/> </div>" );
                            var name = val.substring(8);
                            <!--$("body").append( "<p>" + name +" </p>" );-->
                        }

                        <!--$(".column").append( "<span class='stretch'></span>" );-->
                    });
                }
            });

            <!--$('body').on('click','img',function(){alert('it works');})-->

            // If hovering for two seconds, send alert.
            var timeoutId;
            <!--$('body').on('mouseover','img',-->
              <!--function(){-->
                <!--alert('wow');-->
              <!--})-->
            $(".col-lg-11").mouseover(
                function () {
                    timeoutId = window.setTimeout(function(){
                       alert("I did it!");
                     });
                }, function () {
                    window.clearTimeout(timeoutId);
                }
            );
        });

        $(document).ready(function() {
            $(".hovering").hover(

              function () {
                  var $this = $(this);
                  var timer = $this.data("timer") || 0;
                  clearTimeout(timer);
                  $this.addClass("door");
                  timer = setTimeout(function() {
                      $this.addClass("doorstatic");
                      alert("please work");
                  }, 2000); // 2000 is in mil sec eq to 2 sec.
                  $this.data("timer", timer);
              }, function () {
                  var $this = $(this);
                  var timer = $this.data("timer") || 0;
                  clearTimeout(timer);
                  $this.removeClass("door doorstatic");
              });
        });


        var elements = [];
        var offsetLeft = 0;
        var offsetTop = 0;
        var offsetWidth = 0;
        var offsetHeight = 0;
        var offsetRight = 0;
        var offsetBottom = 0;
        // Get Image coordinates
        window.addEventListener('load', function () {
            elements = document.getElementsByClassName("images");
        });

        // Gets current mouse position
        // TODO: do for all images
        function coordinate(event) {

             // clientX gives horizontal coordinate
             var x = event.pageX;

             // clientY gives vertical coordinates
             var y = event.pageY;

             offsetLeft = elements[0].offsetLeft;
             offsetTop = elements[0].offsetTop;
             offsetWidth = elements[0].offsetWidth;
             offsetHeight = elements[0].offsetHeight;
             offsetRight = offsetLeft + offsetWidth;
             offsetBottom = offsetTop + offsetHeight;

             var temp = elements.item(0);

             if (x > offsetLeft - 50 && x < offsetRight + 50 && y > offsetTop - 50 && y < offsetBottom + 50) {

                temp.style.transform = 'scale(2)';
                <!--temp.classList.add('wiggle');-->

             }
          }

          // Return to normal size when leave image
          function normalImage(x) {
             var temp = elements.item(0);
             temp.style.transform = 'scale(1)';
          }

          <!--function wiggle() {-->
                <!--var temp = elements.item(0);-->
                <!--temp.style.animationName = 'shake';-->
                <!--temp.style.animationDuration = '1s';-->
                <!--temp.style.animationIterationCount = 'infinite';-->
          <!--}-->

    </script>
  </head>

  <body onmousemove="coordinate(event)">
    <div class="container-fluid">
      <div class="top-pane">
        <!--<div class="col-lg-1"><img src="images/eSense.png" /></div>-->
        <div class="col-lg-11" style="padding-top:30px; text-align:left;">
          eSense Photo Album
        </div>
      </div>
      <script type="module">
        import interact from
        'https://cdn.jsdelivr.net/npm/@interactjs/interactjs/index.js'

        // Allows objects to be draggable
        // target elements with the "draggable" class
        interact('.draggable')
          .draggable({
            // enable inertial throwing
            inertia: true,
            // keep the element within the area of it's parent
            modifiers: [
              interact.modifiers.restrictRect({
                restriction: 'parent',
                endOnly: true
              })
            ],
            // enable autoScroll
            autoScroll: true,

            listeners: {
              // call this function on every dragmove event
              move: dragMoveListener,

              // call this function on every dragend event
              end (event) {
                var textEl = event.target.querySelector('p')

                textEl && (textEl.textContent =
                  'moved a distance of ' +
                  (Math.sqrt(Math.pow(event.pageX - event.x0, 2) +
                             Math.pow(event.pageY - event.y0, 2) | 0))
                    .toFixed(2) + 'px')
              }
            }
          })

        function dragMoveListener (event) {
          var target = event.target
          // keep the dragged position in the data-x/data-y attributes
          var x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx
          var y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy

          // translate the element
          target.style.webkitTransform =
            target.style.transform =
              'translate(' + x + 'px, ' + y + 'px)'

          // update the posiion attributes
          target.setAttribute('data-x', x)
          target.setAttribute('data-y', y)
        }

        // this function is used later in the resizing and gesture demos
        window.dragMoveListener = dragMoveListener

        </script>

      <br /><br /><br /><br />

      <!--<img src="images/photos/Hardy-Hibiscus.jpg" alt="Hardy Hibiscus" width="160" height="120" class='draggable hovering zoom'>-->
      <!--<div id="thumbs" class="column">-->

        <!--</div>-->
        <div class="row">

        </div>

    </div>
  </body>
</html>
