<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>eSense Photo Album</title>
    <link rel="stylesheet" href="css/fonts.css" />
    <link rel="stylesheet" href="css/panel-style.css" />
    <link rel="stylesheet" href="css/animate.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/bootstrap4-toggle.min.css" />
    <link
      rel="stylesheet"
      href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css"
    />
    <link rel="stylesheet" href="css/foundations.min.css" />

    <script src="js/jquery.min.js"></script>
    <script src="js/socket.io.js"></script>
    <script src="js/smoothie.js"></script>
    <script src="js/panel-main.js"></script>
    <script src="js/bootstrap4-toggle.min.js"></script>
    <script src="js/three.js"></script>
    <script type="text/javascript" src="js/amplitude.min.js"></script>
    <script src="js/control-player.js"></script>
    <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        var folder = "images/";

        // Get images from folder and add them in rows and columns
        $(document).ready(function() {
            $.ajax({
                url : folder,
                success: function (data) {
                    $(data).find("a").attr("href", function (i, val) {
                        if( val.match(/\.(jpe?g|png|gif)$/) ) {
                            <!--$(".row").append( "<div class='column grow' onmouseover='increaseImage(this)' onmouseout='normalImage(this)'> <img src='.." + val +"' alt='" + val +"' style='width:50%' class='images draggable wiggle' onmouseover='onHover(this)'/> </div>" );-->

                            $(".row").append( "<div class='column grow'> <img src='.." + val +"' alt='" + val +"' style='width:50%' class='images draggable' onmouseover='onHover(this)'/> </div>" );
                            var name = val.substring(8);
                        }
                    });
                }
            });
        });

        var elements = [];
        var divElements = [];
        var offsetLeft = 0;
        var offsetTop = 0;
        var offsetWidth = 0;
        var offsetHeight = 0;
        var offsetRight = 0;
        var offsetBottom = 0;

        var widthString = 0;
        var heightString = 0;

        var scaledWidth = 0;
        var scaledHeight = 0;

        var origin = 0;

        var padding = 100;

        // Get Image coordinates and set their scaled width and height strings
        window.addEventListener('load', function () {
            elements = document.getElementsByClassName("images");

            offsetLeft = elements[0].offsetLeft;
            offsetTop = elements[0].offsetTop;
            offsetWidth = elements[0].offsetWidth;
            offsetHeight = elements[0].offsetHeight;
            offsetRight = offsetLeft + offsetWidth;
            offsetBottom = offsetTop + offsetHeight;

            widthString = offsetWidth + "px";
            heightString = offsetHeight + "px";

            scaledWidth = offsetWidth * 1.5;
            scaledHeight = offsetHeight * 1.5;

            scaledWidth = scaledWidth + "px";
            scaledHeight = scaledHeight + "px";

            origin = elements[0].origin;

            divElements = document.getElementsByClassName("column");
            console.log(divElements);
        });

        // Gets current mouse position
        // TODO: do for all images
        function coordinate(event) {

             // clientX gives horizontal coordinate
             var x = event.pageX;

             // clientY gives vertical coordinates
             var y = event.pageY;

             var temp = elements.item(0);

             <!--if ( (x < offsetLeft - padding || x > offsetRight + padding) && (y < offsetTop - padding || y > offsetBottom + padding)) {-->
                <!--padding = 100;-->
             <!--}-->

             <!--if (x > offsetLeft - padding && x < offsetRight + padding && y > offsetTop - padding && y < offsetBottom + padding) {-->

                <!--temp.style.width = scaledWidth;-->
                <!--temp.style.height = scaledHeight;-->
             <!--}-->

             <!--if (x < offsetLeft - padding && x > offsetRight + padding && y < offsetTop - padding && y > offsetBottom + padding) {-->

                <!--temp.style.width = widthString;-->
                <!--temp.style.height = heightString;-->
             <!--}-->
          }

        var timeoutId = null;

        // Return to normal size when leave image
        function normalImage(x) {
             var temp = elements.item(0);

             temp.style.width = widthString;
             temp.style.height = heightString;

             <!--padding = 0;-->
             window.clearTimeout(timeoutId);
        }

        function increaseImage(x) {
            var image = elements.item(0);
            var div = divElements.item(0);

            var divWidth = div.offsetWidth - 50 + "px";
            var divHeight = div.offsetHeight - 50 + "px";

            image.style.width = divWidth;
            image.style.height = divHeight;
        }

        // Set alert after hovering for two seconds
        var myVar;

        function onHover() {
          <!--timeoutId = window.setTimeout(function(){-->
             <!--alert("I did it!");-->
           <!--}, 1000);-->
           var temp = 'temp';
        }

    </script>
  </head>

  <body onmousemove="coordinate(event)">
    <div class="container-fluid">
      <div class="top-pane">
        <!--<div class="col-lg-1"><img src="images/eSense.png" /></div>-->
        <div class="col-lg-11" style="padding-top:30px; text-align:left;">
          eSense Photo Album
        </div>
      </div>
      <script type="module">
        import interact from
        'https://cdn.jsdelivr.net/npm/@interactjs/interactjs/index.js'

        // Allows objects to be draggable
        // target elements with the "draggable" class
        interact('.draggable')
          .draggable({
            // enable inertial throwing
            inertia: true,
            // keep the element within the area of it's parent
            modifiers: [
              interact.modifiers.restrictRect({
                restriction: 'parent',
                endOnly: true
              })
            ],
            // enable autoScroll
            autoScroll: true,

            listeners: {
              // call this function on every dragmove event
              move: dragMoveListener,

              // call this function on every dragend event
              end (event) {
                var textEl = event.target.querySelector('p')

                textEl && (textEl.textContent =
                  'moved a distance of ' +
                  (Math.sqrt(Math.pow(event.pageX - event.x0, 2) +
                             Math.pow(event.pageY - event.y0, 2) | 0))
                    .toFixed(2) + 'px')
              }
            }
          })

        function dragMoveListener (event) {
          var target = event.target
          // keep the dragged position in the data-x/data-y attributes
          var x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx
          var y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy

          // translate the element
          target.style.webkitTransform =
            target.style.transform =
              'translate(' + x + 'px, ' + y + 'px)'

          // update the posiion attributes
          target.setAttribute('data-x', x)
          target.setAttribute('data-y', y)
        }

        // this function is used later in the resizing and gesture demos
        window.dragMoveListener = dragMoveListener

        </script>

      <br /><br /><br /><br />

        <div class="row">

        </div>

    </div>
  </body>
</html>
