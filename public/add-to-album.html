<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Album</title>
    <link rel="stylesheet" href="css/fonts.css" />
    <link rel="stylesheet" href="css/panel-style.css" />
    <link rel="stylesheet" href="css/animate.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/bootstrap4-toggle.min.css" />
    <link
      rel="stylesheet"
      href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css"
    />
    <link rel="stylesheet" href="css/foundations.min.css" />

    <script src="js/jquery.min.js"></script>
    <script src="js/socket.io.js"></script>
    <script src="js/smoothie.js"></script>
    <script src="js/panel-main.js"></script>
    <script src="js/bootstrap4-toggle.min.js"></script>
    <script src="js/three.js"></script>
    <script type="text/javascript" src="js/amplitude.min.js"></script>
    <script src="js/control-player.js"></script>
    <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="module">
        import interact from 'https://cdn.jsdelivr.net/npm/@interactjs/interactjs/index.js';

        var queryString = window.location.search;
        var currentAlbum = queryString.substring(1);

        var folder = "images/";

        var elements = [];
        var divElements = [];
        var offsetLeft = 0;
        var offsetTop = 0;
        var offsetWidth = 0;
        var offsetHeight = 0;
        var offsetRight = 0;
        var offsetBottom = 0;

        var widthString = 0;
        var heightString = 0;

        var scaledWidth = 0;
        var scaledHeight = 0;

        var origin = 0;

        var padding = 100;

        // Get images from folder and add them in rows and columns
        $(document).ready(function() {
            $.ajax({
                url : folder,
                success: function (data) {
                    $(data).find("a").attr("href", function (i, val) {

                        if( val.includes("Album") && val != currentAlbum) {
                            $(".row").append( "<div class='column grow' onmouseover='snap(this)'> <img src='../images/Folder-Icon.png' id='" + val +"' style='width:50%' class='images grid-snap'/> </div>" );
                            var name = val.substring(8);
                        }

                        if (val == currentAlbum) {
                          $("body").append( "<div class='column'> <img src='../images/Folder-Icon.png' id='" + val +"' style='width:50%' class='images mouse-follower'/> </div>" );
                            var name = val.substring(8);
                        }
                        
                    });
                }
            });
        });       

    </script>
  </head>

  <body onmousemove="coordinate(event)">
    <div class="container-fluid">
      <div class="top-pane">
        <div class="col-lg-11" style="padding-top:30px; text-align:left;">
          Add to Album
        </div>
      </div>

      <script>

      	var timeoutId = null;
        var queryString = window.location.search;
        var currentAlbum = queryString.substring(1);

        // Return to normal size when leave image
        function clearTime(x) {
             window.clearTimeout(timeoutId);
        }

      	function onBackHover() {
          timeoutId = window.setTimeout(function(){
            location.href = '/';
           }, 1000);
        }    

        function coordinate(event) {

            const movingAlbum = document.getElementById(currentAlbum);
            var x;
            var y;

            if (event) {
              x = event.pageX;
              y = event.pageY;
              movingAlbum.style.top = y + 1 + 'px';
              movingAlbum.style.left = x + 'px';
              console.log('x', movingAlbum.offsetLeft);
              console.log('y', movingAlbum.offsetTop);
            }

             // if el2 is within region, translate the element until it snaps to el1
        }

        function snap(event) {
          console.log(event);
          console.log(event.offsetLeft);
          console.log(event.offsetTop);
        }           

      </script>

      <div class="row">

      </div>

      <div class="grow open-button" onmouseover='snap(this)'>
      	<button class="album-button" onmouseout='clearTime(this)'>Back</button>
      </div>

    </div>
  </body>
</html>
